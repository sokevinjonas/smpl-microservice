version: '3.8'

services:
  smpl-microservice:
    build: .
    container_name: smpl-microservice
    ports:
      - "5000:5000"
    networks:
      - smpl-network
    volumes:
      # Code source - monté en temps réel (pas besoin de rebuild!)
      - ./app.py:/app/app.py
      - ./smpl_engine.py:/app/smpl_engine.py
      - ./evaluate_agora.py:/app/evaluate_agora.py
      - ./inspect_gt.py:/app/inspect_gt.py
      - ./utils:/app/utils
      # Modèles (lecture seule)
      - ./models:/app/models:ro
      # Logs et Dataset
      - ./logs:/app/logs
      - ./dataset:/app/dataset
    environment:
      - FLASK_ENV=development

networks:
  smpl-network:
    driver: bridge
